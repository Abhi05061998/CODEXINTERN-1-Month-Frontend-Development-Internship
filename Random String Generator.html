<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Random String Generator - Standalone HTML</title>
		<script src="https://cdn.tailwindcss.com"></script>
		<style>
			body {
				font-family: "Inter", sans-serif;
			}
			input[type="range"]::-webkit-slider-thumb {
				-webkit-appearance: none;
				appearance: none;
				width: 16px;
				height: 16px;
				border-radius: 50%;
				background: #6d28d9;
				cursor: pointer;
				box-shadow: 0 0 0 4px rgba(109, 40, 217, 0.3);
				transition: background 0.15s ease-in-out;
			}
		</style>

		<script src="https://unpkg.com/react@18/umd/react.development.js"></script>
		<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
		<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
	</head>
	<body>
		<div id="root"></div>

		<script type="text/babel">
			const { useState, useCallback, useEffect } = React;

			const ALPHA = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
			const NUMBERS = "0123456789";
			const SYMBOLS = "!@#$%^&*()_+~`|}{[]:;?><,./-=";

			const App = () => {
				const [stringLength, setStringLength] = useState(12);
				const [includeNumbers, setIncludeNumbers] = useState(true);
				const [includeSymbols, setIncludeSymbols] = useState(false);
				const [generatedString, setGeneratedString] = useState("");
				const [feedback, setFeedback] = useState("");
				const [isGenerating, setIsGenerating] = useState(false);

				const generateRandomString = useCallback(() => {
					setIsGenerating(true);
					setFeedback("");

					let characterPool = ALPHA;
					if (includeNumbers) {
						characterPool += NUMBERS;
					}
					if (includeSymbols) {
						characterPool += SYMBOLS;
					}

					if (characterPool.length === 0) {
						setFeedback(
							"Error: Select at least one character type (Numbers or Symbols)."
						);
						setGeneratedString("NO CHARACTERS SELECTED");
						setIsGenerating(false);
						return;
					}

					if (stringLength <= 0 || stringLength > 100) {
						setFeedback("Error: Length must be between 1 and 100.");
						setGeneratedString("INVALID LENGTH");
						setIsGenerating(false);
						return;
					}

					let result = "";
					for (let i = 0; i < stringLength; i++) {
						const randomIndex = Math.floor(
							Math.random() * characterPool.length
						);
						result += characterPool.charAt(randomIndex);
					}

					setTimeout(() => {
						setGeneratedString(result);
						setIsGenerating(false);
					}, 300);
				}, [stringLength, includeNumbers, includeSymbols]);

				useEffect(() => {
					if (stringLength > 0 && stringLength <= 100) {
						generateRandomString();
					}
				}, [
					stringLength,
					includeNumbers,
					includeSymbols,
					generateRandomString,
				]);

				const handleGenerateClick = () => {
					generateRandomString();
				};

				const copyToClipboard = () => {
					if (
						generatedString &&
						generatedString !== "NO CHARACTERS SELECTED" &&
						generatedString !== "INVALID LENGTH"
					) {
						try {
							const textArea = document.createElement("textarea");
							textArea.value = generatedString;
							document.body.appendChild(textArea);
							textArea.select();
							document.execCommand("copy");
							document.body.removeChild(textArea);
							setFeedback("Copied to clipboard!");
							setTimeout(() => setFeedback(""), 2000);
						} catch (err) {
							setFeedback("Failed to copy. Please copy manually.");
						}
					}
				};

				return (
					<div className="min-h-screen bg-gray-50 flex items-center justify-center p-4 font-sans">
						<div className="w-full max-w-lg bg-white shadow-2xl rounded-xl p-8 space-y-6">
							<h1 className="text-3xl font-extrabold text-gray-900 text-center">
								Random String Generator
							</h1>
							<p className="text-center text-sm text-gray-500">
								Built with{" "}
								<span className="font-bold text-purple-600">useState</span>,{" "}
								<span className="font-bold text-purple-600">useCallback</span>,
								and <span className="font-bold text-purple-600">useEffect</span>
								.
							</p>

							<div className="space-y-4">
								<label className="block text-sm font-medium text-gray-700">
									Generated String
								</label>
								<div className="relative">
									<input
										type="text"
										readOnly
										value={isGenerating ? "Generating..." : generatedString}
										className={`w-full p-4 border-2 ${
											feedback.includes("Error")
												? "border-red-500 bg-red-50"
												: "border-purple-300 bg-purple-50"
										} rounded-lg text-lg font-mono tracking-wider text-gray-800 focus:outline-none transition-colors duration-300`}
									/>
									<button
										onClick={copyToClipboard}
										disabled={isGenerating || feedback.includes("Error")}
										className="absolute right-2 top-1/2 transform -translate-y-1/2 p-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:bg-gray-400 transition"
										title="Copy to Clipboard"
									>
										<svg
											xmlns="http://www.w3.org/2000/svg"
											className="h-5 w-5"
											viewBox="0 0 20 20"
											fill="currentColor"
										>
											<path d="M7 9a2 2 0 012-2h6a2 2 0 012 2v6a2 2 0 01-2 2H9a2 2 0 01-2-2V9z" />
											<path d="M5 3a2 2 0 00-2 2v6a2 2 0 002 2V5h6a2 2 0 00-2-2H5z" />
										</svg>
									</button>
								</div>
								{feedback && (
									<p
										className={`text-sm font-medium ${
											feedback.includes("Copied")
												? "text-green-600"
												: "text-red-600"
										}`}
									>
										{feedback}
									</p>
								)}
							</div>

							<div className="bg-gray-100 p-6 rounded-lg shadow-inner space-y-5">
								<h2 className="text-xl font-semibold text-gray-800">
									Settings
								</h2>

								<div>
									<label
										htmlFor="length"
										className="block text-sm font-medium text-gray-700 mb-2"
									>
										String Length ({stringLength})
									</label>
									<input
										id="length"
										type="range"
										min="1"
										max="100"
										value={stringLength}
										onChange={(e) => setStringLength(Number(e.target.value))}
										className="w-full h-2 bg-gray-300 rounded-lg appearance-none cursor-pointer range-lg accent-purple-600"
									/>
								</div>

								<div className="flex flex-col space-y-3">
									<OptionCheckbox
										id="numbers"
										label="Include Numbers (0-9)"
										checked={includeNumbers}
										onChange={() => setIncludeNumbers(!includeNumbers)}
									/>
									<OptionCheckbox
										id="symbols"
										label="Include Symbols (!@#...)"
										checked={includeSymbols}
										onChange={() => setIncludeSymbols(!includeSymbols)}
									/>
								</div>

								<button
									onClick={handleGenerateClick}
									disabled={isGenerating}
									className="w-full py-3 mt-4 bg-purple-600 text-white font-bold rounded-lg shadow-md hover:bg-purple-700 transition duration-150 disabled:bg-gray-400 disabled:cursor-not-allowed"
								>
									{isGenerating ? "Generating..." : "Manual Generate String"}
								</button>
							</div>
						</div>
					</div>
				);
			};

			const OptionCheckbox = ({ id, label, checked, onChange }) => (
				<div className="flex items-center">
					<input
						id={id}
						type="checkbox"
						checked={checked}
						onChange={onChange}
						className="h-5 w-5 text-purple-600 border-gray-300 rounded focus:ring-purple-500"
					/>
					<label
						htmlFor={id}
						className="ml-3 text-sm font-medium text-gray-700 select-none"
					>
						{label}
					</label>
				</div>
			);

			const root = ReactDOM.createRoot(document.getElementById("root"));
			root.render(<App />);
		</script>
	</body>
</html>
